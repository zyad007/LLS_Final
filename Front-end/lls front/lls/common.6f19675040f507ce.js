"use strict";(self.webpackChunklls=self.webpackChunklls||[]).push([[592],{4436:(T,c,o)=>{o.d(c,{V:()=>d});var w=o(4650);let d=(()=>{class a{constructor(){this.sections=[],this.answers=[],this.enumType="Enum",this.trueOrFalseType="TRUE_OR_FALSE_QUESTION_BLOCK",this.openQuestionType="OPEN_QUESTION_BLOCK",this.singleMcqType="SINGLE_SELECT_MCQ_BLOCK",this.multiMcqType="MULTI_SELECT_MCQ_BLOCK",this.textType="TEXT",this.codeType="CODE",this.imageType="IMAGE",this.videoType="MEDIA",this.iframeType="FRAME",this.questionType="QUESTION",this.contentType="CONTENT",this.localStoreName="student-expirement",this.id=""}setSections(e,s=null){e.forEach((i,t)=>{for(let r=1;r<=3;r++)i["column"+r].forEach((u,n)=>{u.content.data=JSON.parse(u.content.data)})}),this.id=s,this.sections=e,this.setAnswers()}setAnswers(){let e=localStorage.getItem(this.id+this.localStoreName);e?this.answers=JSON.parse(e):(this.answers=this.sections.map(s=>this.newSection(s.index,s.title)),this.updateLocalStorage())}updateLocalStorage(){localStorage.setItem(this.id+this.localStoreName,JSON.stringify(this.answers))}delteLocalStorage(){localStorage.removeItem(this.id+this.localStoreName),this.answers=[]}upsertAnswerTrueOrFalse(e,s,i,t,r){let u=this.answers[e]["column"+s];if(u.length){let n=!1;if(u=u.map(l=>{if(l.type==this.trueOrFalseType&&l.index==i){n=!0;let p=!1;return l.studentAnswers.statements=l.studentAnswers.statements.map(h=>(h.statementId==t&&(h.answer=r,p=!0),h)),p||l.studentAnswers.statements.push({statementId:t,answer:r}),l}return l}),!n){let l=this.newTrueAndFalse(i);l.studentAnswers.statements.push({statementId:t,answer:r}),u.push(l)}}else{let n=this.newTrueAndFalse(i);n.studentAnswers.statements.push({statementId:t,answer:r}),u.push(n)}this.answers[e]["column"+s]=u,this.updateLocalStorage()}upsertAnswerSingleMcq(e,s,i,t){let r=this.answers[e]["column"+s];if(r.length){let u=!1;if(r=r.map(n=>(n.type==this.singleMcqType&&n.index==i&&(n.studentAnswers.choices[0]={choiceId:t},u=!0),n)),!u){let n=this.newSingleMcq(i);n.studentAnswers.choices.push({choiceId:t}),r.push(n)}}else{let u=this.newSingleMcq(i);u.studentAnswers.choices.push({choiceId:t}),r.push(u)}this.answers[e]["column"+s]=r,this.updateLocalStorage()}upsertAnswerMultiMcq(e,s,i,t){let r=this.answers[e]["column"+s];if(r.length){let u=!1;if(r=r.map(n=>(n.type==this.multiMcqType&&n.index==i&&(n.studentAnswers.choices=t,u=!0),n)),!u){let n=this.newMultiMcq(i);n.studentAnswers.choices.push(t),r.push(n)}}else{let u=this.newMultiMcq(i);u.studentAnswers.choices=t,r.push(u)}this.answers[e]["column"+s]=r,this.updateLocalStorage()}upsertOpenQuestion(e,s,i,t){let r=this.answers[e]["column"+s];if(r.length){let u=!1;if(r=r.map(n=>(n.type==this.openQuestionType&&n.index==i&&(n.studentAnswers.answer=t,u=!0),n)),!u){let n=this.newOpenQuestion(i);n.studentAnswers.answer=t,r.push(n)}}else{let u=this.newOpenQuestion(i);u.studentAnswers.answer=t,r.push(u)}this.answers[e]["column"+s]=r,this.updateLocalStorage()}getTrueOrFalse(e,s,i){try{return this.answers[e]["column"+s].filter(t=>t.type==this.trueOrFalseType&&t.index==i)[0].studentAnswers.statements}catch{return null}}getsingleMcq(e,s,i){try{return this.answers[e]["column"+s].filter(t=>t.type==this.singleMcqType&&t.index==i)[0].studentAnswers.choices[0]}catch{return null}}deleteMultiMcq(e,s,i){try{this.answers[e]["column"+s]=this.answers[e]["column"+s].filter(t=>t.type!=this.multiMcqType&&t.index!=i),this.updateLocalStorage()}catch{}}deleteOpenQuestion(e,s,i){try{this.answers[e]["column"+s]=this.answers[e]["column"+s].filter(t=>t.type!=this.openQuestionType&&t.index!=i),this.updateLocalStorage()}catch{}}getMultiMcq(e,s,i){try{return this.answers[e]["column"+s].filter(t=>t.type==this.multiMcqType&&t.index==i)[0].studentAnswers.choices}catch{return null}}getOpenQuestion(e,s,i){try{return this.answers[e]["column"+s].filter(t=>t.type==this.openQuestionType&&t.index==i)[0].studentAnswers.answer}catch{return null}}newSection(e=null,s=""){return{index:e,title:s,column1:[],column2:[],column3:[]}}newTrueAndFalse(e){return{index:e,mainType:this.questionType,type:this.trueOrFalseType,studentAnswers:{statements:[]}}}newSingleMcq(e){return{index:e,mainType:this.questionType,type:this.singleMcqType,studentAnswers:{choices:[]}}}newMultiMcq(e){return{index:e,mainType:this.questionType,type:this.multiMcqType,studentAnswers:{choices:[]}}}newOpenQuestion(e){return{index:e,mainType:this.questionType,type:this.openQuestionType,studentAnswers:{answer:""}}}parseForPreview(e){return e.forEach((s,i)=>{for(let t=1;t<=3;t++)s["column"+t].forEach((r,u)=>{r.content.data=JSON.parse(r.content.data)})}),e}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=w.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);